package chainmanager

import (
	"fmt"

	"github.com/bsv-blockchain/go-sdk/block"

	"github.com/bsv-blockchain/go-chaintracks/chaintracks"
)

// Genesis block headers for each network (80 bytes each).
//
//nolint:gochecknoglobals // Genesis block data is constant and must be global
var (
	genesisMainnet = []byte{
		0x01, 0x00, 0x00, 0x00, // version
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // prev block (zeros)
		0x3b, 0xa3, 0xed, 0xfd, 0x7a, 0x7b, 0x12, 0xb2,
		0x7a, 0xc7, 0x2c, 0x3e, 0x67, 0x76, 0x8f, 0x61,
		0x7f, 0xc8, 0x1b, 0xc3, 0x88, 0x8a, 0x51, 0x32,
		0x3a, 0x9f, 0xb8, 0xaa, 0x4b, 0x1e, 0x5e, 0x4a, // merkle root
		0x29, 0xab, 0x5f, 0x49, // timestamp (2009-01-03 18:15:05)
		0xff, 0xff, 0x00, 0x1d, // bits
		0x1d, 0xac, 0x2b, 0x7c, // nonce
	}

	genesisTestnet = []byte{
		0x01, 0x00, 0x00, 0x00, // version
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // prev block (zeros)
		0x3b, 0xa3, 0xed, 0xfd, 0x7a, 0x7b, 0x12, 0xb2,
		0x7a, 0xc7, 0x2c, 0x3e, 0x67, 0x76, 0x8f, 0x61,
		0x7f, 0xc8, 0x1b, 0xc3, 0x88, 0x8a, 0x51, 0x32,
		0x3a, 0x9f, 0xb8, 0xaa, 0x4b, 0x1e, 0x5e, 0x4a, // merkle root
		0xda, 0xe5, 0x49, 0x4d, // timestamp
		0xff, 0xff, 0x00, 0x1d, // bits
		0x1a, 0xa4, 0xae, 0x18, // nonce
	}

	genesisTeratestnet = []byte{
		0x01, 0x00, 0x00, 0x00, // version
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // prev block (zeros)
		0x3b, 0xa3, 0xed, 0xfd, 0x7a, 0x7b, 0x12, 0xb2,
		0x7a, 0xc7, 0x2c, 0x3e, 0x67, 0x76, 0x8f, 0x61,
		0x7f, 0xc8, 0x1b, 0xc3, 0x88, 0x8a, 0x51, 0x32,
		0x3a, 0x9f, 0xb8, 0xaa, 0x4b, 0x1e, 0x5e, 0x4a, // merkle root
		0x34, 0x6f, 0xa4, 0x68, // timestamp
		0xff, 0xff, 0x00, 0x1d, // bits
		0x9c, 0x6c, 0x1f, 0x41, // nonce
	}
)

// getGenesisHeader returns the genesis block header for the given network.
func getGenesisHeader(network string) (*block.Header, error) {
	var data []byte
	switch network {
	case "main":
		data = genesisMainnet
	case "test":
		data = genesisTestnet
	case "teratest":
		data = genesisTeratestnet
	default:
		return nil, fmt.Errorf("%w: %s", chaintracks.ErrUnknownNetwork, network)
	}
	return block.NewHeaderFromBytes(data)
}
